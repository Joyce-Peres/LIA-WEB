<div class="profile-page">
  <div class="profile-card">
    <div class="header">
      <div class="avatar" [attr.data-initials]="profile()?.avatarText ?? 'PR'">
        {{ profile()?.avatarText?.slice(0,2) ?? 'PR' }}
      </div>
      <div class="header-info">
        <h1 class="title">Perfil</h1>
        <p class="subtitle">Gerencie suas informações pessoais</p>
      </div>
    </div>

    <div class="profile-info">
      <div class="field-row">
        <label>Email</label>
        <div class="readonly">{{ email }}</div>
      </div>
      <div class="field-row">
        <label for="displayName">Nome de exibição</label>
        <input id="displayName" type="text" [(ngModel)]="displayName" />
      </div>
      <div class="field-row">
        <label for="avatarText">Iniciais do avatar</label>
        <input id="avatarText" type="text" maxlength="2" [(ngModel)]="avatarText" />
      </div>
    </div>

    <div class="stats">
      <div class="stat">
        <div class="stat-label">XP total</div>
        <div class="stat-value">{{ profile()?.totalXp ?? 0 }}</div>
      </div>
      <div class="stat">
        <div class="stat-label">Streak</div>
        <div class="stat-value">{{ profile()?.currentStreak ?? 0 }} dias</div>
      </div>
    </div>

    <div class="actions">
      <button class="btn primary" [disabled]="isSaving" (click)="saveProfile()">
        {{ isSaving ? 'Salvando...' : 'Salvar alterações' }}
      </button>
      <button class="btn ghost" (click)="handleLogout()">Sair</button>
    </div>
  </div>
</div>
